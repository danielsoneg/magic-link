replicaCount: 1

image:
  repository: ghcr.io/danielsoneg/magic-link
  tag: ""
  pullPolicy: IfNotPresent

# Secrets: pick ONE of these three approaches:
#
# 1. Let the chart create the secret (set config.fastmailAppPassword)
# 2. Use a pre-existing secret (set existingSecret)
# 3. Use ExternalSecrets operator (set externalSecret.enabled)

# Option 2: reference a secret you manage yourself
existingSecret: ""

# Option 3: ExternalSecrets operator
externalSecret:
  enabled: true
  secretStoreRef: onepassword
  secretStoreKind: ClusterSecretStore
  refreshInterval: 1h
  fastmailAppPassword:
    key: fastmail-magic-link/credential
  sessionSecret:
    key: magic-link/SESSION_SECRET

config:
  fastmailUsername: ""
  fastmailDomain: ""
  adminEmail: ""
  rpId: "login.egd.news"
  rpName: "Magic Link"
  origin: "https://login.egd.news"
  linkRetentionHours: "24"
  # Only used if not using existingSecret or externalSecret:
  # fastmailAppPassword: ""
  # sessionSecret: ""

service:
  type: ClusterIP
  port: 3000

httpRoute:
  enabled: true
  hostnames:
    - login.egd.news
  gateway:
    name: external
    namespace: default
    sectionName: https-egd-news

persistence:
  enabled: true
  size: 1Gi
  storageClass: ""
  accessMode: ReadWriteOnce

resources: {}

nodeSelector: {}
tolerations: []
affinity: {}
